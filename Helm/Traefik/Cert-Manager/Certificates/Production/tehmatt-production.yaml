---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: tehmatt # change to your domain
  namespace: traefik # add to traefik namespace so it can use it (you DO NOT need it in each app namespace!!!)
spec:
  secretName: tehmatt-tls # change to your secretname
  issuerRef:
    name: letsencrypt-production
    kind: ClusterIssuer
  commonName: "*.tehmatt.com" # change to your domain
  dnsNames:
  - "*.tehmatt.com" # change to your domain
  - tehmatt.com # change to your domain
  # Enable automatic secret mirroring via emberstack/kubernetes-reflector so Traefik can find the
  # wildcard certificate secret in application namespaces without duplicating cert-manager configs.
  # See: https://github.com/emberstack/kubernetes-reflector
  secretTemplate:
    annotations:
      reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
      reflector.v1.k8s.emberstack.com/reflection-auto-enabled: "true"
      reflector.v1.k8s.emberstack.com/reflection-auto-namespaces: "grafana,loki-stack,romm,pihole,ollama,audiobookshelf,vaultwarden,overseerr,dozzle,argocd,prometheus,vault,homepage,sonarr"
