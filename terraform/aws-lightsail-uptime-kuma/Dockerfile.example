FROM louislam/uptime-kuma:latest

# Copy pre-configured database
# Export your database first: docker cp uptime-kuma:/app/data/kuma.db ./kuma.db
COPY kuma.db /app/data/kuma.db

# Optional: Copy custom assets
# COPY custom-logo.png /app/data/upload/

# Set proper ownership
USER root
RUN chown -R node:node /app/data
USER node

# Add labels
LABEL maintainer="your-email@example.com"
LABEL description="Pre-configured Uptime Kuma instance"

# Health check
HEALTHCHECK --interval=60s --timeout=5s --start-period=60s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost:3001/ || exit 1
